# SOPS configuration file
# This file defines which keys can decrypt which secrets

# To generate an age key:
#   age-keygen -o ~/.config/sops/age/keys.txt
#
# To get your age public key:
#   age-keygen -y ~/.config/sops/age/keys.txt
#
# Replace the placeholder below with your actual age public key

keys:
  # User keys - add your age public key here
  - &hubert age1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

  # Host keys - generated from SSH host keys
  # Get with: ssh-keyscan localhost | ssh-to-age
  # Or: cat /etc/ssh/ssh_host_ed25519_key.pub | ssh-to-age
  - &work age1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
  - &home age1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

creation_rules:
  # Secrets for all hosts
  - path_regex: secrets/secrets\.yaml$
    key_groups:
      - age:
          - *hubert
          - *work
          - *home

  # Work-specific secrets
  - path_regex: secrets/work\.yaml$
    key_groups:
      - age:
          - *hubert
          - *work

  # Home-specific secrets
  - path_regex: secrets/home\.yaml$
    key_groups:
      - age:
          - *hubert
          - *home
